
<!DOCTYPE html>
<html>
<head>
  <!--
    Kilsbergen MkDocs theme copyright 2019 Ruud van Asseldonk.
    Licensed under the Apache 2.0 license.
    See https://github.com/ruuda/kilsbergen.
  -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Configuration — Musium</title>
  <!-- Out of the options of rsms.me + Google Fonts, self-hosting, and only
    Google Fonts, the latter is by far the fastest when the docs themselves are
    not on a CDN, even though it's two additional domains to connect to. -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&display=swap" rel="stylesheet">
  <style>
  /* Inter font family, copyright Rasmus Andersson, licensed under SIL OFL 1.1,
     see https://rsms.me/inter and https://rsms.me/inter/inter.css. */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('https://rsms.me/inter/font-files/Inter-roman.var.woff2?v=3.19') format('woff2');
    font-named-instance: 'Regular';
  }
  @font-face {
    font-family: 'Inter';
    font-style: italic;
    font-weight: 100 900;
    font-display: swap;
    src: url('https://rsms.me/inter/font-files/Inter-italic.var.woff2?v=3.19') format('woff2');
    font-named-instance: 'Italic';
  }
  /* Modular scale with exponent 1.7^(1/3). The 1.7 was chosen as the line hight
     that goes well with Inter. Previously I used 1.59, but it was just too tight.
     0.59em
     0.70em
     1.00em
     1.19em
     1.42em
     1.70em
     2.02em
     2.42em
  */
  * { margin: 0; padding: 0; border-spacing: 0; }
  html {
    font-family: Inter, Roboto, sans-serif;
    /*
    Turn on character variant 8 for Inter, which puts serifs on the uppercase I.
    Also turn on variant 1, which has a curved 1.
    Disable contextual alternates for now. There is a bug, either in Inter or
    in Chrome (https://crbug.com/1046095) that causes colons after a <strong> to
    be raised above the baseline.
    */
    font-feature-settings: 'cv01' 1, 'cv08' 1, 'calt' 0;

    font-size: 16px;
    line-height: 1.7em;
    background-color: #fff;
    height: 100%;
  }
  em {
    /* The variable font from Google Fonts uses a slant axis, it does not come
       with a separate true italic. (But Inter doesn't have a true italic either
       way.) */
    font-style: oblique 10deg;
  }
  body {
    height: 100%;
  }
  #content {
    display: grid;
    grid-template-columns: auto 16rem 50rem auto;
    color: #333;
    min-height: 100%;
  }
  #main {
    grid-area: 1 / 3 / 2 / 4;
    padding: 2.2rem;
    padding-left: 4rem;
    padding-right: 4rem;
    overflow: hidden;
  }
  #breadcrumbs {
    margin-bottom: 3rem;
    word-spacing: 0.3em;
    color: #78a;
  }
  #breadcrumbs a {
    word-spacing: 0;
    color: #78a;
  }
  article {
    margin-top: 1.3rem;
  }
  h1, h2, h3 {
    font-weight: 600;
    font-size: 1rem;
    color: #444;
    position: relative;
  }
  h1 {
    font-size: 2rem;
    margin-bottom: 2.1rem;
    line-height: 2.42rem;
    margin-top: -0.35rem;
    margin-bottom: 1.75rem;
  }
  h2 {
    font-size: 1.42rem;
    margin-top: 3.5rem;
    margin-bottom: 1.6rem;
  }
  .headerlink {
    position: absolute;
    left: -0.9em;
    width: 1em;
    opacity: 0.0;
    transition: opacity 0.2s ease-in;
  }
  /* Don't show the link for h1, usually you only have a single h1 at the top
     of the page, so it doesn't make much sense to add an anchor there, and with
     the larger font size, it doesn't fit in a narrow viewport. */
  h2:hover .headerlink, h3:hover .headerlink {
    opacity: 1.0;
  }
  code {
    font-family: 'Roboto Mono', monospace;
    font-size: 0.84rem;
    line-height: 1.5rem;
  }
  h3 > code {
    /* Roboto Mono 500 is about as heavy as Inter semibold (600). */
    font-weight: 500;
  }
  abbr {
    text-transform: uppercase;
    /* Downsize so caps are x-height, and compensate weight loss. */
    font-size: 0.78rem;
    font-weight: 500;
    letter-spacing: 0.05rem;
    /* Prevent abbrs from changing the line height of lines in which they occur. */
    line-height: 0;
  }
  sub, sup {
    /* Don't disturb the line height of normal text. */
    line-height: 0rem;
    font-size: 0.78rem;
    font-weight: 500;
  }
  p > code,
  a > code,
  h3 > code,
  li > code,
  td > code,
  dt > code,
  dd > code {
    background-color: #f0f0f0;
    padding: 0.13rem;
    padding-left: 0.3rem;
    padding-right: 0.3rem;
    border-radius: 0.2rem;
    line-height: 1rem;
  }
  h3 {
    padding-top: 0.9rem;
    padding-bottom: 0.8rem;
  }
  h3 > code {
    margin-left: -0.1rem;
  }
  a {
    color: #36d;
    text-decoration: none;
  }
  p, ul, ol, dl, pre, table {
    /* Same space as line height, leave exactly one line blank. */
    margin-bottom: 1.7rem;
  }
  pre {
    padding-top: 0.8rem;
    padding-bottom: 0.9rem;
    padding-left: 1.19rem;
    padding-right: 0;
    background-color: #f8f8f8;
    border-radius: 0 0.2rem 0.2rem 0;
    border-left: 0.3rem solid #d5d8e0;
    overflow-x: auto;
  }
  pre > code {
    margin-right: 1.41rem;
    color: #555;
  }
  code .k { color: #36d; }
  code .kt, code .nb { color: #d36; }
  code .c1, code .cm { color: #d36; font-style: italic; }
  code .s { color: #c43; }
  ul, ol {
    list-style-type: none;
    counter-reset: item;
  }
  table {
    font-variant-numeric: tabular-nums;
  }
  th, td {
    padding-right: 2rem;
  }
  th {
    text-align: left;
  }
  td > img {
    display: block;
    padding-top: 1em;
    padding-bottom: 1em;
  }
  dl {
    display: grid;
    grid-template-columns: 1fr 4fr;
    grid-column-gap: 2em;
  }
  dl dt {
    text-align: right;
  }
  #main ul li:before {
    color: #555;
    content: '\2022';
    display: inline-block;
    font-weight: 700;
    margin-left: -0.9rem;
    width: 0.9rem;
  }
  #main ul li {
    margin-left: 0.87rem;
  }
  #main ol li:before {
    content: counter(item);
    display: inline-block;
    font-weight: 700;
    width: 0.8rem;
    margin-left: -1.6rem;
    padding-right: 0.8rem;
  }
  #main ol li {
    margin-left: 1.6rem;
    counter-increment: item;
  }
  #nav-prev-next {
    margin-top: 3.4rem;
    padding-bottom: 3.3rem;
  }
  #nav-prev, #nav-next, #repo-link {
    display: inline-block;
  }
  #nav-prev {
    float: left;
  }
  #nav-next, #repo-link {
    float: right;
    text-align: right;
  }
  #nav-prev::before {
    content: '\219e';
    padding-right: 0.5em;
  }
  #nav-next::after {
    content: '\21a0';
    padding-left: 0.5em;
  }
  aside {
    grid-area: 1 / 1 / 2 / 3;
    border-right: 1px solid #eee;
    background-color: #fafafa;
    color: #78a;
  }
  aside nav {
    margin-top: 9rem;
    padding-bottom: 3.4rem;
    width: 14rem;
    float: right;
    /* Put the active chapter border over the sidebar border. */
    margin-right: -1px;
  }
  aside a {
    color: inherit;
  }
  aside .toc-section {
    font-weight: 700;
  }
  aside ul {
    margin-bottom: 0;
  }
  aside li {
    overflow: hidden;
    text-overflow: ellipsis;
  }
  aside li ul {
    padding-top: 0.6rem;
    padding-bottom: 1.1rem;
  }
  aside li.toc-section {
    margin-top: 1.7rem;
  }
  aside li.toc-section {
    color: #36d;
  }
  aside li.current, aside li ul {
    border-right: 0.3em solid #d5d8e0;
    padding-left: 1em;
    margin-left: -1em;
  }
  aside li.toc-chapter.current {
    font-weight: 600;
  }
  aside li.toc-heading {
    padding-left: 1em;
    padding-right: 0.3em;
  }

  @media(max-width: 63rem)
  {
    #content {
      /* Manual implementation of max-width: on narrower viewports,
         auto-size the body. */
      grid-template-columns: 0 16rem auto 0;
    }
  }

  @media(max-width: 1150px)
  {
    html { font-size: 15px; }
  }

  /* Move the sidebar TOC below content at small widths. */
  @media(max-width: 800px)
  {
    #content {
      display: block;
    }
    aside {
      border-top: 1px solid #eee;
      border-right: 0px none;
      padding-top: 1.7em;
    }
    aside nav {
      margin-left: 4em;
      margin-top: 1.7em;
      margin-right: 0;
      float: none;
      width: auto;
    }
    #main {
      padding-bottom: 1.7em;
    }
    /* Now that the TOC is full-width, adding the border on the right to
       highlight the active page is not as clear anymore, it can be far away.
       The current chapter is still in boldface, but that does not work for
       section indexes. So point a guillemet at it as well. */
    aside li.current, aside li ul {
      border-right: 0px none;
      position: relative;
    }
    aside li.current:before {
      content: '\203a';
      position: absolute;
      left: 0;
    }
  }

  /* Use less generous margins for very narrow viewports. */
  @media(max-width: 650px)
  {
    #main {
      padding-left: 2rem;
      padding-right: 2rem;
    }
    aside nav {
      margin-left: 2rem;
      padding-bottom: 2rem;
    }
  }

  @media(max-width: 450px)
  {
    #main {
      padding-left: 1.7em;
      padding-right: 1.7em;
    }
    aside nav {
      margin-left: 1.7em;
    }
  }
  </style>
</head>
<body>
  <div id="content">
    <div id="main">
      <nav id="breadcrumbs">
        <a href="https://ruuda.github.io/musium/">Musium</a>
         › <a href="../building/">User Guide</a> 
         › <a href="./">Configuration</a> 
        <a id="repo-link" href="https://github.com/ruuda/musium/">GitHub</a>
      </nav>
      <article>
        <h1 id="configuration">Configuration<a class="headerlink" href="#configuration">&para;</a></h1>
<p>Musium reads all settings from a configuration file. The location of the config
file is passed as an argument to the program. Config files consist of key-value
pairs with <code>=</code> separator, and support <code>#</code> for comments.</p>
<h2 id="example">Example<a class="headerlink" href="#example">&para;</a></h2>
<pre><code># Note: listening on port 80 requires CAP_NET_BIND_SERVICE.
# If you want to run as an unprivileged user, use a port beyond 1024.
listen = 0.0.0.0:80

library_path = /home/media/music
covers_path = /var/cache/musium/covers
data_path = /var/lib/musium

audio_device = UMC404HD 192k
audio_volume_control = UMC404HD 192k Output

high_pass_cutoff = 30 Hz
</code></pre>
<h2 id="settings">Settings<a class="headerlink" href="#settings">&para;</a></h2>
<p>The following settings are available. Unless noted otherwise, all options must
be specified exactly once.</p>
<h3 id="listen">listen<a class="headerlink" href="#listen">&para;</a></h3>
<p>The address and port to bind to, for example <code>0.0.0.0:80</code>. Use <code>0.0.0.0</code> as the
address to listen for external connections and make the player available to the
entire local network. Use <code>localhost</code> to listen only on loopback.</p>
<p>The listen address is optional and defaults to <code>0.0.0.0:8233</code>.</p>
<h3 id="library_path">library_path<a class="headerlink" href="#library_path">&para;</a></h3>
<p>The directory to recursively scan for flac files.</p>
<h3 id="covers_path">covers_path<a class="headerlink" href="#covers_path">&para;</a></h3>
<p>The directory to store cover art thumbnails in. These are generated by the
<code>scan</code> subcommand, and loaded by the <code>serve</code> subcommand at startup. The
directory must exist.</p>
<h3 id="data_path">data_path<a class="headerlink" href="#data_path">&para;</a></h3>
<p>The directory to store persistent state in. In particular, the listens database
will be placed in this directory. Updating the listens database causes disk
activity for every track, so it is recommended to keep the data path on a silent
storage medium. See also <a href="../disks/">the section on disks</a> for more details.</p>
<h3 id="audio_device">audio_device<a class="headerlink" href="#audio_device">&para;</a></h3>
<p>The <abbr>Alsa</abbr> card used for playback. When the configured card cannot
be found, Musium will list all of the cards that are available. Musium uses the
<abbr>Alsa</abbr> hardware device directly, there is no need nor support for
PulseAudio.</p>
<h3 id="audio_volume_control">audio_volume_control<a class="headerlink" href="#audio_volume_control">&para;</a></h3>
<p>The <abbr>Alsa</abbr> simple mixer control that controls playback volume. Often
there are controls named <code>Master</code>, <code>PCM</code>, and <code>Speakers</code>, but this differs from
card to card. Use <code>amixer scontrols</code> to list available controls. Be sure to run
this with the right privileges (possibly as superuser, or as a user in the
<code>audio</code> group) to reveal all available controls.</p>
<p>Musium assumes exclusive control over this mixer control, so you should not
manipulate it manually with tools like Alsamixer after starting Musium. In
particular, Musium adjusts the volume to perform loudness normalization, so even
for a constant target playback volume, Musium will manipulate the mixer control.</p>
<h3 id="high_pass_cutoff">high_pass_cutoff<a class="headerlink" href="#high_pass_cutoff">&para;</a></h3>
<p>Apply a high-pass filter to the output, with the given cutoff frequency. The
value must be an integer and include the <em>Hz</em> unit as suffix. This setting is
optional and defaults to 0&nbsp;Hz (so no frequencies are filtered).</p>
<p>A high-pass filter is useful in situations where your speakers reproduce low
frequencies — perhaps even louder than intended due to suboptimal room
acoustics — that are unpleasant or unwanted. Especially 2020s albums can be
bass-heavy, and taking off the low end can help to allow greater playback volume
without making the room sound saturated. Values around 50&nbsp;Hz are suitable
for this use case.</p>
<p>The high pass filter is not perfect. It has a gain of -3&nbsp;dB at the cutoff
frequency, and a rolloff of -12&nbsp;dB per octave. For example, at a cutoff
frequency of 50&nbsp;Hz, a 25&nbsp;Hz tone would be diminished by 15&nbsp;dB.</p>
<h3 id="exec_pre_playback_path">exec_pre_playback_path<a class="headerlink" href="#exec_pre_playback_path">&para;</a></h3>
<p>When Musium starts playback from an idle state, it can optionally execute a
program before continuing. For example, you can use this to ensure that your
speakers are powered on. See the page about <a href="../tradfri/">Trådfri control</a> for
how to do this with Ikea Trådfri outlets.</p>
<p>The value is the path of a program to be executed. It is not possible to pass
arguments to the program. Instead, you can create a shell script that will call
the program with the required arguments. Musium waits for the program to exit
before starting playback. However, if the program does not finish within 10
seconds, Musium will continue playback anyway. After 20 more seconds, Musium
will kill the child process if it is still running.</p>
<p>This setting is optional. When it is not set, Musium starts playback instantly.</p>
<h3 id="exec_post_idle_path">exec_post_idle_path<a class="headerlink" href="#exec_post_idle_path">&para;</a></h3>
<p>After playback ends, Musium can optionally execute a program. For example, you
can use this to turn your speakers off when there is no longer any music
playing. See the page about <a href="../tradfri/">Trådfri control</a> for how to do this
with Ikea Trådfri outlets.</p>
<p>The value is the path of a program to be executed. It is not possible to pass
arguments to the program. Instead, you can create a shell script that will call
the program with the required arguments. If the program does not finish within
30 seconds, Musium will kill the child process.</p>
<p>You can control the time between playback ending, and executing the program,
with the <code>idle_timeout_seconds</code> setting. If playback resumes within this time,
Musium does not execute the post-idle program. It <em>will</em> execute the
pre-playback program when playback resumes, regardless of whether the post-idle
program was executed.</p>
<p>This setting is optional.</p>
<h3 id="idle_timeout_seconds">idle_timeout_seconds<a class="headerlink" href="#idle_timeout_seconds">&para;</a></h3>
<p>The time between playback ending, and executing the post-idle program, in
seconds. This setting is optional and defaults to three minutes. This setting
is only useful in combination with <code>exec_post_idle_path</code>.</p>
      </article>
      <nav id="nav-prev-next">
        <a id="nav-prev" href="../building/" title="Building">Previous</a>
        <a id="nav-next" href="../running/" title="Running">Next</a>
        </nav>
      </div>
    <aside>
      <nav>
        <ul>
        <li class="toc-section"><a href="..">Overview</a></li>
          <li class="toc-section
            "><a href="../building/">User Guide</a></li>
          
            <li class="toc-chapter
              "><a href="../building/">Building</a></li>
            
            <li class="toc-chapter
               current"><a href="./">Configuration</a></li>
            <li><ul>
                <li class="toc-heading"><a href="#example">Example</a></li>
                <li class="toc-heading"><a href="#settings">Settings</a></li>
                </ul></li>
               
            <li class="toc-chapter
              "><a href="../running/">Running</a></li>
            
            <li class="toc-chapter
              "><a href="../webinterface/">Webinterface</a></li>
            
            <li class="toc-chapter
              "><a href="../tagging/">Tagging</a></li>
            
            <li class="toc-chapter
              "><a href="../loudness/">Loudness normalization</a></li>
            
            <li class="toc-chapter
              "><a href="../scrobbling/">Scrobbling to Last.fm</a></li>
            
            <li class="toc-chapter
              "><a href="../listenbrainz/">Submitting to Listenbrainz</a></li>
            
            <li class="toc-chapter
              "><a href="../tradfri/">Trådfri control</a></li>
            
            <li class="toc-chapter
              "><a href="../disks/">Disks</a></li>
            <li class="toc-section"><a href="../api/">API Reference</a></li>
          <li class="toc-section
            "><a href="../search/">Internals</a></li>
          
            <li class="toc-chapter
              "><a href="../search/">Search</a></li>
            
            <li class="toc-chapter
              "><a href="../performance/">Performance</a></li>
            
            <li class="toc-chapter
              "><a href="../thumbnails/">Thumbnails</a></li>
            </ul>
      </nav>
    </aside>
  </div>
</body>
</html>