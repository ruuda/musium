
<!DOCTYPE html>
<html>
<head>
  <!--
    Kilsbergen MkDocs theme copyright 2019 Ruud van Asseldonk.
    Licensed under the Apache 2.0 license.
    See https://github.com/ruuda/kilsbergen.
  -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tagging — Musium</title>
  <!-- Out of the options of rsms.me + Google Fonts, self-hosting, and only
    Google Fonts, the latter is by far the fastest when the docs themselves are
    not on a CDN, even though it's two additional domains to connect to. -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital@0;1&display=swap" rel="stylesheet">
  <link href="https://docs.ruuda.nl/musium/tagging/" rel="canonical">
  <style>
  /* Inter font family, copyright Rasmus Andersson, licensed under SIL OFL 1.1,
     see https://rsms.me/inter and https://rsms.me/inter/inter.css. */
  @font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('https://rsms.me/inter/font-files/Inter-roman.var.woff2?v=3.19') format('woff2');
    font-named-instance: 'Regular';
  }
  @font-face {
    font-family: 'Inter';
    font-style: italic;
    font-weight: 100 900;
    font-display: swap;
    src: url('https://rsms.me/inter/font-files/Inter-italic.var.woff2?v=3.19') format('woff2');
    font-named-instance: 'Italic';
  }
  /* Modular scale with exponent 1.7^(1/3). The 1.7 was chosen as the line hight
     that goes well with Inter. Previously I used 1.59, but it was just too tight.
     0.59em
     0.70em
     1.00em
     1.19em
     1.42em
     1.70em
     2.02em
     2.42em
  */
  * { margin: 0; padding: 0; border-spacing: 0; }
  html {
    font-family: Inter, Roboto, sans-serif;
    /*
    Turn on character variant 8 for Inter, which puts serifs on the uppercase I.
    Also turn on variant 1, which has a curved 1.
    Disable contextual alternates for now. There is a bug, either in Inter or
    in Chrome (https://crbug.com/1046095) that causes colons after a <strong> to
    be raised above the baseline.
    */
    font-feature-settings: 'cv01' 1, 'cv08' 1, 'calt' 0;

    font-size: 16px;
    line-height: 1.7em;
    background-color: #fff;
    height: 100%;
  }
  em {
    font-style: italic;
  }
  body {
    height: 100%;
  }
  #content {
    display: grid;
    grid-template-columns: auto 16rem 50rem auto;
    color: #333;
    min-height: 100%;
  }
  #main {
    grid-area: 1 / 3 / 2 / 4;
    padding: 2.2rem;
    padding-left: 4rem;
    padding-right: 4rem;
    overflow: hidden;
  }
  #breadcrumbs {
    margin-bottom: 3rem;
    word-spacing: 0.3em;
    color: #78a;
  }
  #breadcrumbs a {
    word-spacing: 0;
    color: #78a;
  }
  article {
    margin-top: 1.3rem;
  }
  h1, h2, h3 {
    font-weight: 600;
    font-size: 1rem;
    color: #444;
    position: relative;
  }
  h1 {
    font-size: 2rem;
    margin-bottom: 2.1rem;
    line-height: 2.42rem;
    margin-top: -0.35rem;
    margin-bottom: 1.75rem;
  }
  h2 {
    font-size: 1.42rem;
    margin-top: 3.5rem;
    margin-bottom: 1.6rem;
  }
  .headerlink {
    position: absolute;
    left: -0.9em;
    width: 1em;
    opacity: 0.0;
    transition: opacity 0.2s ease-in;
  }
  /* Don't show the link for h1, usually you only have a single h1 at the top
     of the page, so it doesn't make much sense to add an anchor there, and with
     the larger font size, it doesn't fit in a narrow viewport. */
  h2:hover .headerlink, h3:hover .headerlink {
    opacity: 1.0;
  }
  code {
    font-family: 'Roboto Mono', monospace;
    font-size: 0.84rem;
    line-height: 1.5rem;
  }
  h3 > code {
    /* Roboto Mono 500 is about as heavy as Inter semibold (600). */
    font-weight: 500;
  }
  abbr {
    text-transform: uppercase;
    /* Downsize so caps are x-height, and compensate weight loss. */
    font-size: 0.78rem;
    font-weight: 500;
    letter-spacing: 0.05rem;
    /* Prevent abbrs from changing the line height of lines in which they occur. */
    line-height: 0;
  }
  sub, sup {
    /* Don't disturb the line height of normal text. */
    line-height: 0rem;
    font-size: 0.78rem;
    font-weight: 500;
  }
  p > code,
  a > code,
  h3 > code,
  li > code,
  td > code,
  dt > code,
  dd > code {
    background-color: #f0f0f0;
    padding: 0.13rem;
    padding-left: 0.3rem;
    padding-right: 0.3rem;
    border-radius: 0.2rem;
    line-height: 1rem;
  }
  h3 {
    padding-top: 0.9rem;
    padding-bottom: 0.8rem;
  }
  h3 > code {
    margin-left: -0.1rem;
  }
  a {
    color: #36d;
    text-decoration: none;
  }
  p, ul, ol, dl, pre, table {
    /* Same space as line height, leave exactly one line blank. */
    margin-bottom: 1.7rem;
  }
  pre {
    padding-top: 0.8rem;
    padding-bottom: 0.9rem;
    padding-left: 1.19rem;
    padding-right: 0;
    background-color: #f8f8f8;
    border-radius: 0 0.2rem 0.2rem 0;
    border-left: 0.3rem solid #d5d8e0;
    overflow-x: auto;
  }
  pre > code {
    margin-right: 1.41rem;
    color: #555;
  }
  code .k { color: #36d; }
  code .kt, code .nb { color: #d36; }
  code .c1, code .cm { color: #d36; font-style: italic; }
  code .s { color: #c43; }
  ul, ol {
    list-style-type: none;
    counter-reset: item;
  }
  table {
    font-variant-numeric: tabular-nums;
  }
  th, td {
    padding-right: 2rem;
  }
  th {
    text-align: left;
  }
  td > img {
    display: block;
    padding-top: 1em;
    padding-bottom: 1em;
  }
  dl {
    display: grid;
    grid-template-columns: 1fr 4fr;
    grid-column-gap: 2em;
  }
  dl dt {
    text-align: right;
  }
  #main ul li:before {
    color: #555;
    content: '\2022';
    display: inline-block;
    font-weight: 700;
    margin-left: -0.9rem;
    width: 0.9rem;
  }
  #main ul li {
    margin-left: 0.87rem;
  }
  #main ol li:before {
    content: counter(item);
    display: inline-block;
    font-weight: 700;
    width: 0.8rem;
    margin-left: -1.6rem;
    padding-right: 0.8rem;
  }
  #main ol li {
    margin-left: 1.6rem;
    counter-increment: item;
  }
  #nav-prev-next {
    margin-top: 3.4rem;
    padding-bottom: 3.3rem;
  }
  #nav-prev, #nav-next, #repo-link {
    display: inline-block;
  }
  #nav-prev {
    float: left;
  }
  #nav-next, #repo-link {
    float: right;
    text-align: right;
  }
  #nav-prev::before {
    content: '\219e';
    padding-right: 0.5em;
  }
  #nav-next::after {
    content: '\21a0';
    padding-left: 0.5em;
  }
  aside {
    grid-area: 1 / 1 / 2 / 3;
    border-right: 1px solid #eee;
    background-color: #fafafa;
    color: #78a;
  }
  aside nav {
    margin-top: 9rem;
    padding-bottom: 3.4rem;
    width: 14rem;
    float: right;
    /* Put the active chapter border over the sidebar border. */
    margin-right: -1px;
  }
  aside a {
    color: inherit;
  }
  aside .toc-section {
    font-weight: 700;
  }
  aside ul {
    margin-bottom: 0;
  }
  aside li {
    overflow: hidden;
    text-overflow: ellipsis;
  }
  aside li ul {
    padding-top: 0.6rem;
    padding-bottom: 1.1rem;
  }
  aside li.toc-section {
    margin-top: 1.7rem;
  }
  aside li.toc-section {
    color: #36d;
  }
  aside li.current, aside li ul {
    border-right: 0.3em solid #d5d8e0;
    padding-left: 1em;
    margin-left: -1em;
  }
  aside li.toc-chapter.current {
    font-weight: 600;
  }
  aside li.toc-heading {
    padding-left: 1em;
    padding-right: 0.3em;
  }

  @media(max-width: 63rem)
  {
    #content {
      /* Manual implementation of max-width: on narrower viewports,
         auto-size the body. */
      grid-template-columns: 0 16rem auto 0;
    }
  }

  @media(max-width: 1150px)
  {
    html { font-size: 15px; }
  }

  /* Move the sidebar TOC below content at small widths. */
  @media(max-width: 800px)
  {
    #content {
      display: block;
    }
    aside {
      border-top: 1px solid #eee;
      border-right: 0px none;
      padding-top: 1.7em;
    }
    aside nav {
      margin-left: 4em;
      margin-top: 1.7em;
      margin-right: 0;
      float: none;
      width: auto;
    }
    #main {
      padding-bottom: 1.7em;
    }
    /* Now that the TOC is full-width, adding the border on the right to
       highlight the active page is not as clear anymore, it can be far away.
       The current chapter is still in boldface, but that does not work for
       section indexes. So point a guillemet at it as well. */
    aside li.current, aside li ul {
      border-right: 0px none;
      position: relative;
    }
    aside li.current:before {
      content: '\203a';
      position: absolute;
      left: 0;
    }
  }

  /* Use less generous margins for very narrow viewports. */
  @media(max-width: 650px)
  {
    #main {
      padding-left: 2rem;
      padding-right: 2rem;
    }
    aside nav {
      margin-left: 2rem;
      padding-bottom: 2rem;
    }
  }

  @media(max-width: 450px)
  {
    #main {
      padding-left: 1.7em;
      padding-right: 1.7em;
    }
    aside nav {
      margin-left: 1.7em;
    }
  }
  </style>
</head>
<body>
  <div id="content">
    <div id="main">
      <nav id="breadcrumbs">
        <a href="https://docs.ruuda.nl/musium/">Musium</a>
         › <a href="../building/">User Guide</a> 
         › <a href="./">Tagging</a> 
        <a id="repo-link" href="https://github.com/ruuda/musium/">GitHub</a>
      </nav>
      <article>
        <h1 id="tagging">Tagging<a class="headerlink" href="#tagging">&para;</a></h1>
<p>Musium reads metadata from flac tags (also called Vorbis comments) and maps
those to its internal schema. Musium expects files to be tagged properly, and it
expects the tags to be consistent across files.</p>
<p>Because Musium uses internal ids based on MusicBrainz ids of albums and artists,
MusicBrainz ids are required. Files tagged with <a href="https://picard.musicbrainz.org/">MusicBrainz Picard</a> are
fine in most cases, although for albums credited to multiple artists, additional
configuration might be needed, see the <a href="#multiple-album-artists">section about multiple album
artists</a> below.</p>
<h2 id="schema">Schema<a class="headerlink" href="#schema">&para;</a></h2>
<p>The Musium library consists of a collection of albums. Every album belongs to
one or more artists, and every artist has one or more albums. Every album has
one or more tracks. The track artist can differ from the album artist (for
example, to accomodate feat. artists).</p>
<p>For artists, albums, and tracks, Musium stores the following attributes:</p>
<h3 id="artist">Artist<a class="headerlink" href="#artist">&para;</a></h3>
<ul>
<li>Name</li>
<li>Sort name</li>
</ul>
<h3 id="album">Album<a class="headerlink" href="#album">&para;</a></h3>
<ul>
<li>Title</li>
<li>Original release date</li>
<li>Artist name as credited</li>
<li>First seen (import time or time of first play)</li>
</ul>
<h3 id="track">Track<a class="headerlink" href="#track">&para;</a></h3>
<ul>
<li>Disc number</li>
<li>Track number</li>
<li>Title</li>
<li>Artist</li>
<li>Duration</li>
</ul>
<h2 id="tags">Tags<a class="headerlink" href="#tags">&para;</a></h2>
<p>Musium reads metadata from the following tags. Unless specified otherwise,
all tags are mandatory and must occur exactly once. Note that duration is not
read from the metadata, it is determined from the flac header instead.</p>
<h3 id="discnumber">discnumber<a class="headerlink" href="#discnumber">&para;</a></h3>
<p>Disc number, a non-negative integer less than 16. Defaults to 1 if not provided.</p>
<h3 id="tracknumber">tracknumber<a class="headerlink" href="#tracknumber">&para;</a></h3>
<p>Track number, a non-negative integer less than 256.</p>
<h3 id="title">title<a class="headerlink" href="#title">&para;</a></h3>
<p>Track title.</p>
<h3 id="artist_1">artist<a class="headerlink" href="#artist_1">&para;</a></h3>
<p>Track artist.</p>
<h3 id="album_1">album<a class="headerlink" href="#album_1">&para;</a></h3>
<p>Title of the album.</p>
<h3 id="albumartist">albumartist<a class="headerlink" href="#albumartist">&para;</a></h3>
<p>Name of the album artist.</p>
<h3 id="albumartists">albumartists<a class="headerlink" href="#albumartists">&para;</a></h3>
<p>Optionally, for a collaboration album, the names of each artist separately. This
tag should then occur multiple times, once per artist. See also <a href="#multiple-album-artists">the section on
multiple album artists</a> below. When <code>albumartists</code> are
provided, <code>albumartist</code> should contain the joined name. For example, if
<code>albumartists</code> is provided twice, once with value <em>John Legend</em> and once with
<em>The Roots</em>, <code>albumartist</code> might be set to <em>John Legend &amp; The Roots</em>.</p>
<h3 id="albumartistsort">albumartistsort<a class="headerlink" href="#albumartistsort">&para;</a></h3>
<p>Sort name of the album artist (e.g. name without articles). Defaults to the
value of <code>albumartist</code> when not provided. For an album with multiple artists
this tag is ignored, use <code>albumartistssort</code> (note the double s) instead for
collaboration albums.</p>
<h3 id="albumartistssort">albumartistssort<a class="headerlink" href="#albumartistssort">&para;</a></h3>
<p>Optionally, the sort name of each album artist separately, to match
<code>albumartists</code>. Defaults to the values in <code>albumartists</code> when not provided.</p>
<h3 id="originaldate">originaldate<a class="headerlink" href="#originaldate">&para;</a></h3>
<p>Original release date of the album in <abbr>YYYY-MM-DD</abbr> format.
If an exact date is not known, <abbr>YYYY-MM</abbr> and <abbr>YYYY</abbr>
can be used instead.</p>
<h3 id="date">date<a class="headerlink" href="#date">&para;</a></h3>
<p>If <code>originaldate</code> is not provided, this field is used instead.</p>
<h3 id="musicbrainz_albumartistid">musicbrainz_albumartistid<a class="headerlink" href="#musicbrainz_albumartistid">&para;</a></h3>
<p>MusicBrainz id to group albums under. This can occur multiple times, see also
<a href="#multiple-album-artists">the section on multiple album artists</a> below.</p>
<h3 id="musicbrainz_albumid">musicbrainz_albumid<a class="headerlink" href="#musicbrainz_albumid">&para;</a></h3>
<p>MusicBrainz id to group tracks under.</p>
<h2 id="consistency">Consistency<a class="headerlink" href="#consistency">&para;</a></h2>
<p>Tags contain redundant information, which must be consistent. For example, all
tracks on the same album should have the same album artist and album title.</p>
<p>Musium uses the MusicBrainz album id to determine what album a track belongs to,
and the MusicBrainz album artist id to determine which artist an album belongs
to. The directory structure of the files is irrelevant. If there is an
inconsistency, Musium reports it, and it will then make an arbitrary choice
about what version to keep.</p>
<h2 id="multiple-album-artists">Multiple album artists<a class="headerlink" href="#multiple-album-artists">&para;</a></h2>
<p>Collaboration albums are sometimes credited to multiple artists. (As opposed to
compliation albums, which are usually credited to a single special artist named
<em>Various Artists</em>.) There are different ways to represent this with tags:</p>
<ol>
<li>Treat every combination of existing artists as a new artist, with a unique
    <code>musicbrainz_albumartistid</code>.</li>
<li>Credit the album only to a single primary artist.</li>
<li>Credit the album to multiple artists, with multiple
    <code>musicbrainz_albumartistid</code> tags, and multiple <code>albumartists</code> tags in
    addition to the standard <code>albumartist</code> tag.</li>
</ol>
<p>Option 1 and 2 are more widely supported across music players, but their
downside is that the album will not show up in the discography of every credited
artist. For example, if you tag <a href="https://musicbrainz.org/release-group/563d758b-aa16-4e35-8986-6d402ea3cef8"><em>Wake Up!</em></a> by <em>John Legend &amp; The Roots</em>
with only <em>John Legend</em> as the album artist, then it will not show up in the
album list of <em>The Roots</em>, and if you tag it with <em>John Legend &amp; The Roots</em> as
album artist, then it will neither show up under <em>John Legend</em> nor under <em>The
Roots</em>. If the track artist of individual tracks lists all artists, Musium is
still able to find those tracks individually in search by searching for any of
the artists.</p>
<p>Before Musium version 0.11.0, albums in Musium belonged to exactly one artist,
so option 1 and 2 were the only ways of tagging a collaboration album.
Since Musium 0.11.0, Musium supports multiple artists per album, and option
3 is possible. However, this requires an additional tag that Picard does not
write by default. Musium needs:</p>
<ul>
<li>The name of the collaboration that the album is credited to in the
   <code>albumartist</code> tag. This tag should occur exactly once.</li>
<li>The MusicBrainz ids of the individual artists in the
   <code>musicbrainz_albumartistid</code> tag. This tag should occur multiple times, once
   per artist.</li>
<li>The names of the individual artists in the <code>albumartists</code> tag. This tag
   should occur multiple times, once per artist, and in the same order as the
   ids.</li>
<li>Optionally, <code>albumartistssort</code>. If this tag is present, it must occur as many
   times as <code>albumartists</code>, and list artists in the same order.</li>
</ul>
<p>To make Picard write the <code>albumartists</code> tags you need the <a href="https://github.com/rdswift/picard-plugins/blob/430ecb4cfdf77c97a463a2a69b2e7d690ff8d282/plugins/additional_artists_variables/docs/README.md">Additional Artist
Variables plugin</a>, which is distributed with Picard, but not enabled by
default. In the Picard settings:</p>
<ul>
<li>Enable <em>Additional Artist Variables</em> under <em>Plugins</em>.</li>
<li>In <em>Scripting</em>, create a new tagger script.</li>
<li>Add the following expression:</li>
</ul>
<pre><code>$setmulti(albumartists,%_artists_album_all_std_multi%)
$setmulti(albumartistssort,%_artists_album_all_sort_multi%)
</code></pre>
<p>This should be sufficient to make Musium handle the collaboration albums.</p>
<p>Note, in some cases it is not so clear what constitutes a collaboration. For
example, after releasing multiple albums together, the members of drum ’n bass
duo <a href="https://musicbrainz.org/artist/d01d66ae-be95-42c3-86c4-fff502690a33"><em>Fred V &amp; Grafix</em></a> each released solo albums under the names <a href="https://musicbrainz.org/artist/d5259aab-5a5d-42a8-a0b8-fb1bcd6b7ac9"><em>Fred
V</em></a> and <a href="https://musicbrainz.org/artist/c02a5966-b5c4-483a-8326-483edcf3680e"><em>Grafix</em></a>, and their earlier albums are not considered
collaborations (at least in MusicBrainz), <em>Fred V &amp; Grafix</em> is its own separate
artist. On the other hand, drum ’n bass artists <a href="https://musicbrainz.org/artist/8cf49f40-b8fe-4a63-b4ea-f922d6145bb4"><em>Sub Focus</em></a> and
<a href="https://musicbrainz.org/artist/c9fa114f-8426-4286-a289-9f16c8e092b5"><em>Wilkinson</em></a> did release <a href="https://musicbrainz.org/release-group/7ffd3bc6-a53c-4e7d-bf87-98e5738c1e48">a collaboration album</a> that is credited
to both of the existing artists, the collaboration is not considered a new
artist. When artists collaborate under a new name (for example,
<a href="https://musicbrainz.org/artist/29ed4a49-fb99-4a5c-8713-609cabe6f34a"><em>Kaskade</em></a> and <a href="https://musicbrainz.org/artist/4a00ec9d-c635-463a-8cd4-eb61725f0c60"><em>Deadmau5</em></a> as <a href="https://musicbrainz.org/artist/9c57432d-484f-4181-b73d-f78dbb7a63be"><em>Kx5</em></a>), this is generally
represented as a new artist, instead of a collaboration. The line can be blurry,
it’s up to you how you prefer to tag your files.</p>
      </article>
      <nav id="nav-prev-next">
        <a id="nav-prev" href="../webinterface/" title="Webinterface">Previous</a>
        <a id="nav-next" href="../loudness/" title="Loudness normalization">Next</a>
        </nav>
      </div>
    <aside>
      <nav>
        <ul>
        <li class="toc-section"><a href="..">Overview</a></li>
          <li class="toc-section
            "><a href="../building/">User Guide</a></li>
          
            <li class="toc-chapter
              "><a href="../building/">Building</a></li>
            
            <li class="toc-chapter
              "><a href="../configuration/">Configuration</a></li>
            
            <li class="toc-chapter
              "><a href="../running/">Running</a></li>
            
            <li class="toc-chapter
              "><a href="../webinterface/">Webinterface</a></li>
            
            <li class="toc-chapter
               current"><a href="./">Tagging</a></li>
            <li><ul>
                <li class="toc-heading"><a href="#schema">Schema</a></li>
                <li class="toc-heading"><a href="#tags">Tags</a></li>
                <li class="toc-heading"><a href="#consistency">Consistency</a></li>
                <li class="toc-heading"><a href="#multiple-album-artists">Multiple album artists</a></li>
                </ul></li>
               
            <li class="toc-chapter
              "><a href="../loudness/">Loudness normalization</a></li>
            
            <li class="toc-chapter
              "><a href="../scrobbling/">Scrobbling to Last.fm</a></li>
            
            <li class="toc-chapter
              "><a href="../listenbrainz/">Submitting to Listenbrainz</a></li>
            
            <li class="toc-chapter
              "><a href="../tradfri/">Trådfri control</a></li>
            
            <li class="toc-chapter
              "><a href="../disks/">Disks</a></li>
            
            <li class="toc-chapter
              "><a href="../changelog/">Changelog</a></li>
            <li class="toc-section"><a href="../api/">API Reference</a></li>
          <li class="toc-section
            "><a href="../search/">Internals</a></li>
          
            <li class="toc-chapter
              "><a href="../search/">Search</a></li>
            
            <li class="toc-chapter
              "><a href="../performance/">Performance</a></li>
            
            <li class="toc-chapter
              "><a href="../thumbnails/">Thumbnails</a></li>
            </ul>
      </nav>
    </aside>
  </div>
</body>
</html>